# Description:	Free implementation of the Remote Desktop Protocol (RDP)
# URL:		https://www.freerdp.com/
# Maintainer:	Roman Oreshnikov, r dot oreshnikov at gmail dot com
# Depends on:	cmake cups ffmpeg fuse3 jansson krb5 xorg-libxcursor xorg-libxinerama xorg-libxkbfile xorg-libxrandr

name=freerdp
version=3.19.1
release=1
source=(https://github.com/$name/$name/archive/$version/$name-$version.tar.gz)

build() {
	cmake	-B build \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SKIP_INSTALL_RPATH=ON \
		-DWITH_ALSA=ON \
		-DWITH_CHANNELS=ON \
		-DWITH_CLIENT_CHANNELS=ON \
		-DWITH_CLIENT_SDL3=OFF \
		-DWITH_DSP_FFMPEG=ON \
		-DWITH_FFMPEG=ON \
		-DWITH_ICU=ON \
		-DWITH_JPEG=ON \
		-DWITH_PCSC=ON \
		-DWITH_PULSE=ON \
		-DWITH_SERVER=OFF \
		-DWITH_SYSTEMD=OFF \
		-DWITH_SWSCALE=ON \
		-DWITH_WINPR_TOOLS=OFF \
		-DWITH_X11=ON \
		-S FreeRDP-$version \
		-W no-dev

	cmake --build build
	DESTDIR=$PKG cmake --install build
}
