# Description:	Multirouter traffic grapher
# URL:		https://oss.oetiker.ch/mrtg
# Maintainer:	Roman Oreshnikov, r dot oreshnikov at gmail dot com
# Depends on:	perl libgd net-snmp

name=mrtg
version=2.17.8
release=1
source=(http://oss.oetiker.ch/mrtg/pub/mrtg-$version.tar.gz)

build () {
	cd mrtg-$version

	cd translate
	iconv -f koi8-r -t utf-8 russian.pmd >russian.utf8
	sed -i 's/koi8-r/utf-8/' russian.utf8
	./mergelocale.pl skeleton.pm0 russian.utf8
	mv locales_mrtg.pm ../lib/mrtg2
	cd ..

	./configure --prefix=/usr

	make
	make DESTDIR=$PKG install

	rm -r $PKG/usr/share/{doc,mrtg2} \
		$PKG/usr/share/man/man1/mrtg-{nt,nw}-guide.* \
		$PKG/usr/share/man/man1/mrtg-{contrib,faq,forum,ipv6}.*
}
